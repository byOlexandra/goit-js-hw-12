{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nexport const perPage = 15;\nexport async function getImagesByQuery(query, page) {\n    const baseURL = 'https://pixabay.com';\n    const endPoint = '/api/';\n    const params = new URLSearchParams({\n        key: '53346532-56e1a2cf6c50fcc4672e719cf',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: perPage,\n        page: page \n    })\n    const url = `${baseURL}${endPoint}?${params}`;    \n    const response = await axios.get(url);\n    return response.data;\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\n\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nexport function createGallery(images) {\n    const markup = images\n        .map(img => {\n            return `\n        <li class=\"gallery-item\">\n            <a href=\"${img.largeImageURL}\">\n                <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" />\n                <ul class=\"desc-list\">\n                    <li>\n                        <h2>Likes</h2>\n                        <p>${img.likes}</p>\n                    </li>\n                    <li>\n                        <h2>Views</h2>\n                        <p>${img.views}</p>\n                    </li>\n                    <li>\n                        <h2>Comments</h2>\n                        <p>${img.comments}</p>\n                    </li>\n                    <li>\n                        <h2>Downloads</h2>\n                        <p>${img.downloads}</p>\n                    </li>\n                </ul>\n            </a>\n        </li>`;\n        })\n        .join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh()\n}\n\nexport function clearGallery() { \n    gallery.innerHTML = \"\";\n}\n\n//* LOADER\n\nexport function showLoader() {\n    loader.classList.remove('hidden');\n}\n\nexport function hideLoader() { \n    loader.classList.add('hidden');\n}\n\n//* LOAR MORE BUTTON\n\nexport function showLoadMoreButton() {\n    loadMoreBtn.classList.remove(\"hidden\")\n}\n\nexport function hideLoadMoreButton() {\n    loadMoreBtn.classList.add(\"hidden\")\n}","import { getImagesByQuery, perPage } from './js/pixabay-api';\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton\n} from './js/render-functions.js';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector(\".form\");\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\n\n\n//* EVENT\n\n\nlet page = 0;\nlet prevSearch = \"\";\nlet totalLoaded = 0;\n\nform.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n    hideLoadMoreButton();\n\n    const search = e.target.elements['search-text'].value.trim();\n    if (!search) {\n        iziToast.info({\n            message: 'Please type something to start searching.',\n            position: 'topRight',\n        });\n        return;\n    } \n    if (search !== prevSearch) {\n        page = 0;\n        prevSearch = search;\n        totalLoaded = 0;\n        clearGallery()\n    }    \n    page += 1;\n    showLoader()\n\n    try {\n        const data = await getImagesByQuery(search, page)\n        hideLoader();\n        if (page === 1 && data.hits.length === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight'\n            })\n            return;\n        }        \n\n        createGallery(data.hits);\n        totalLoaded += data.hits.length;\n\n        if (totalLoaded >= data.totalHits) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight'\n            })\n            hideLoadMoreButton()\n            return;\n        }\n        showLoadMoreButton()\n    }\n\n    catch(error) {\n        hideLoader();\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong. Please try again.'\n        });\n    };\n})\n\nloadMoreBtn.addEventListener(\"click\", async (e) => {\n    showLoader()\n    hideLoadMoreButton()\n    page += 1;\n    \n    try {\n        const data = await getImagesByQuery(prevSearch, page);    \n        hideLoader()\n        createGallery(data.hits)\n        const firstCard = document.querySelector('.gallery-item');\n        if (firstCard) {\n            const cardHeight = firstCard.getBoundingClientRect().height;\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: 'smooth',\n            });\n        }\n        totalLoaded += data.hits.length;\n        if (totalLoaded >= data.totalHits) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight'\n            })\n            hideLoadMoreButton()\n            return;\n        }\n        showLoadMoreButton()\n    }   \n    catch (error) {\n        hideLoader();\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong. Please try again.'\n        });\n    }    \n})"],"names":["perPage","getImagesByQuery","query","page","baseURL","endPoint","params","url","axios","gallery","loader","loadMoreBtn","lightbox","SimpleLightbox","createGallery","images","markup","img","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","prevSearch","totalLoaded","e","search","iziToast","data","firstCard","cardHeight"],"mappings":"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"}